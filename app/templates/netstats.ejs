<div class="col-lg-12 col-xl-12">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Packet Types Sent from Server</h3>
        </div>
        <div class="card-body">
            <div id="packet-sent-types" style="height: 32rem"></div>
        </div>
    </div>


    <script>
      netstat_zone_port = <%= port %>;

      require(['c3', 'jquery'], function (c3, $) {
        $(document).ready(function () {

          var chart_endpoint = '/api/zoneserver/netstat/' + netstat_zone_port + '/chart/packet_types_sent';

          $.get(chart_endpoint, function (data) {
            console.log(data);

            chart = c3.generate(
              {
                bindto: '#packet-sent-types',
                // subchart: {
                //   show: true
                // },
                transition: {
                  duration: 0
                },
                line: {
                  connectNull: true,
                },
                point: {
                  show: false
                },
                data: data,
                axis: {
                  x: {
                    type: 'timeseries',
                    tick: {
                      format: '%H:%M:%S',
                      fit: true,
                    }
                  },
                  y: {
                    show: true
                  }
                }
              });

          }).fail(function (data) {
            // $("#error-message").html(data.responseJSON.error).show();
          });

          setInterval(function () {
            refreshCharts();
          }, 1000);


          function refreshCharts() {
            $.get(chart_endpoint, function (data) {
              // var chart_data = { unload: true };
              // $.extend(data, chart_data);
              // console.log(data);

              chart.load(data);
            }).fail(function (data) {
              // $("#error-message").html(data.responseJSON.error).show();
            });
          }
        });
      });
    </script>
</div>
